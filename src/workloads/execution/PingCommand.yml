SchemaVersion: 2018-07-01
Owner: "@mongodb/product-perf"
Description: >
  This is a simple test that runs ping command on MongoDB to meassure the latency of command dispatch.

ActorTemplates:
- TemplateName: PingTemplate
  Config:
    Name: {^Parameter: {Name: "Name", Default: "SingleThreadPing"}}
    Type: RunCommand
    Threads: {^Parameter: {Name: "Threads", Default: 1}}
    Phases:
    - GlobalRate: 50%
      Duration: 30 seconds
      Database: admin
      Operations:
      - OperationName: RunCommand
        OperationCommand:
          ping: 1
    - Duration: 30 seconds
      Database: admin
      Operations:
      - OperationName: RunCommand
        OperationCommand:
          ping: 1

Actors:
- ActorFromTemplate:
    TemplateName: PingTemplate
    TemplateParameters:
      Name: SingleThreadPing
      Threads: 1

- ActorFromTemplate:
    TemplateName: PingTemplate
    TemplateParameters:
      Name: MultiThreadPing
      Threads: 16

AutoRun:
- When:
    mongodb_setup:
      $eq: standalone
